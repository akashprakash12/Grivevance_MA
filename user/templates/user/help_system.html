{% extends 'base.html' %}
{% load i18n %}

{% block title %}{% trans "Help Center" %} | {% trans "Grievance Management" %}{% endblock %}

{% block extra_css %}
<style>
  :root {
    --indigo: #002855;
    --indigo-light: #08438f;
    --accent: #ffc107;
    --bg: #f4f6f9;
    --card-shadow: 0 2px 8px rgba(0, 0, 0, .08);
    --card-shadow-hover: 0 6px 16px rgba(0, 0, 0, .12);
  }

  body {
    background: var(--bg);
    font-family: 'Segoe UI', sans-serif;
  }

  .card-custom {
    background: #fff;
    border-radius: 12px;
    padding: 20px;
    box-shadow: var(--card-shadow);
    transition: .2s;
  }

  .card-custom:hover {
    box-shadow: var(--card-shadow-hover);
  }

  .border-custom {
    border-left: 5px solid var(--accent);
  }

  .help-header {
    background: linear-gradient(to right, var(--indigo), var(--indigo-light));
    color: white;
    padding: 3rem 2rem;
    border-radius: 12px 12px 0 0;
  }

  .active-tab {
    border-bottom: 3px solid var(--accent);
    color: var(--indigo);
    font-weight: 600;
  }

  .accordion-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
  }

  .accordion-content.show {
    max-height: 500px;
  }

  .btn-primary-custom {
    background-color: var(--indigo);
    border-color: var(--indigo);
  }

  .btn-primary-custom:hover {
    background-color: var(--indigo-light);
    border-color: var(--indigo-light);
  }

  .btn-accent {
    background-color: var(--accent);
    border-color: var(--accent);
    color: #000;
  }

  .btn-accent:hover {
    background-color: #e0a800;
    border-color: #e0a800;
  }

  .search-box {
    max-width: 600px;
    margin: 0 auto;
  }

  .search-box input {
    padding: 0.75rem 1.5rem;
    border-radius: 30px;
    border: none;
  }

  .search-box button {
    right: 5px;
    top: 5px;
    background: var(--accent);
    color: #000;
    border-radius: 50%;
    width: 40px;
    height: 40px;
  }

  .help-card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border-left: 4px solid var(--accent);
  }

  .help-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--card-shadow-hover);
  }

  .icon-circle {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255, 193, 7, 0.2);
    color: var(--accent);
    font-size: 1.25rem;
  }
</style>
{% endblock %}

{% block content %}
<div class="card-custom">
  <!-- Help Center Header -->
  <div class="help-header text-center">
    <h1 class="h2 fw-bold mb-3"><i class="fas fa-life-ring me-2"></i>{% trans "Help Center" %}</h1>
    <p class="lead mb-4 opacity-90">{% trans "Find answers to common questions or contact our support team" %}</p>
    
    <!-- Search Bar -->
    <div class="search-box position-relative">
      <input type="text" class="form-control w-100" placeholder="{% trans 'Search help articles...' %}">
      <button class="btn btn-accent position-absolute">
        <i class="fas fa-search"></i>
      </button>
    </div>
  </div>
  
  <!-- Help Sections -->
  <div class="p-4 p-md-5">
    <!-- Navigation Tabs -->
    <div class="border-bottom mb-5">
      <nav class="nav nav-pills">
        <button class="nav-link active-tab me-3" id="faq-tab">{% trans "FAQs" %}</button>
        <button class="nav-link text-muted me-3" id="guides-tab">{% trans "Guides" %}</button>
        <button class="nav-link text-muted me-3" id="contact-tab">{% trans "Contact Support" %}</button>
        <button class="nav-link text-muted" id="status-tab">{% trans "Check Status" %}</button>
      </nav>
    </div>
    
    <!-- FAQ Section -->
    <div id="faq-section" class="help-section">
      <h2 class="h4 fw-bold mb-4 text-indigo"><i class="fas fa-question-circle me-2 text-accent"></i>{% trans "Frequently Asked Questions" %}</h2>
      
      <div class="row g-4 mb-5">
        <!-- FAQ Card -->
        <div class="col-md-6">
          <div class="help-card card h-100">
            <div class="card-body">
              <div class="d-flex">
                <div class="icon-circle me-3">
                  <i class="fas fa-question"></i>
                </div>
                <div>
                  <h3 class="h5 fw-semibold mb-2">{% trans "How do I file a new complaint?" %}</h3>
                  <p class="text-muted">{% trans "Click on 'New Complaint' in your dashboard and fill out the required details about your grievance." %}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- FAQ Card -->
        <div class="col-md-6">
          <div class="help-card card h-100">
            <div class="card-body">
              <div class="d-flex">
                <div class="icon-circle me-3">
                  <i class="fas fa-question"></i>
                </div>
                <div>
                  <h3 class="h5 fw-semibold mb-2">{% trans "How long does resolution take?" %}</h3>
                  <p class="text-muted">{% trans "Most complaints are resolved within 30 days, but complex issues may take longer." %}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- FAQ Card -->
        <div class="col-md-6">
          <div class="help-card card h-100">
            <div class="card-body">
              <div class="d-flex">
                <div class="icon-circle me-3">
                  <i class="fas fa-question"></i>
                </div>
                <div>
                  <h3 class="h5 fw-semibold mb-2">{% trans "Can I edit my complaint?" %}</h3>
                  <p class="text-muted">{% trans "Yes, you can edit complaints that are still in 'Pending' status from your dashboard." %}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- FAQ Card -->
        <div class="col-md-6">
          <div class="help-card card h-100">
            <div class="card-body">
              <div class="d-flex">
                <div class="icon-circle me-3">
                  <i class="fas fa-question"></i>
                </div>
                <div>
                  <h3 class="h5 fw-semibold mb-2">{% trans "What file types can I upload?" %}</h3>
                  <p class="text-muted">{% trans "We accept JPG, PNG, PDF, and MP4 files up to 5MB each." %}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- FAQ Accordion -->
      <h3 class="h4 fw-bold mb-4 text-indigo"><i class="fas fa-ellipsis-h me-2 text-accent"></i>{% trans "More Questions" %}</h3>
      <div class="accordion" id="faqAccordion">
        <div class="accordion-item border mb-3 rounded">
          <h2 class="accordion-header">
            <button class="accordion-button collapsed bg-light" type="button" data-bs-toggle="collapse" data-bs-target="#faqOne">
              {% trans "How do I check the status of my complaint?" %}
            </button>
          </h2>
          <div id="faqOne" class="accordion-collapse collapse">
            <div class="accordion-body">
              <p>{% trans "You can view the current status of all your complaints in the 'My Complaints' section of your dashboard. Each complaint will show its current status (Pending, In Progress, Resolved, etc.) and you can click on it for detailed updates." %}</p>
            </div>
          </div>
        </div>
        
        <div class="accordion-item border mb-3 rounded">
          <h2 class="accordion-header">
            <button class="accordion-button collapsed bg-light" type="button" data-bs-toggle="collapse" data-bs-target="#faqTwo">
              {% trans "What should I do if my complaint is rejected?" %}
            </button>
          </h2>
          <div id="faqTwo" class="accordion-collapse collapse">
            <div class="accordion-body">
              <p>{% trans "If your complaint is rejected, you will receive a notification explaining the reason. You can either:" %}</p>
              <ul class="list-disc ps-4 mt-2">
                <li>{% trans "Submit a new complaint with additional information" %}</li>
                <li>{% trans "Appeal the decision by contacting our support team" %}</li>
                <li>{% trans "Escalate to a higher authority if applicable" %}</li>
              </ul>
            </div>
          </div>
        </div>
        
        <div class="accordion-item border rounded">
          <h2 class="accordion-header">
            <button class="accordion-button collapsed bg-light" type="button" data-bs-toggle="collapse" data-bs-target="#faqThree">
              {% trans "How do I change my account information?" %}
            </button>
          </h2>
          <div id="faqThree" class="accordion-collapse collapse">
            <div class="accordion-body">
              <p>{% trans "You can update your personal information from the 'Profile' section in your account settings. Note that changing your email address may require verification." %}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Guides Section (Hidden by default) -->
    <div id="guides-section" class="help-section d-none">
      <h2 class="h4 fw-bold mb-4 text-indigo"><i class="fas fa-book-open me-2 text-accent"></i>{% trans "Step-by-Step Guides" %}</h2>
      
      <div class="row g-4">
        <!-- Guide Card -->
        <div class="col-md-4">
          <div class="card h-100 border-0 shadow-sm">
            <img src="https://images.unsplash.com/photo-1450101499163-c8848c66ca85?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" alt="{% trans 'Filing a complaint' %}" class="card-img-top" style="height: 180px; object-fit: cover;">
            <div class="card-body">
              <h3 class="h5 fw-semibold mb-2">{% trans "How to File a Complaint" %}</h3>
              <p class="text-muted mb-3">{% trans "Learn the step-by-step process for submitting a new grievance through the portal." %}</p>
              <a href="#" class="btn btn-sm btn-primary-custom">
                {% trans "View Guide" %} <i class="fas fa-arrow-right ms-2"></i>
              </a>
            </div>
          </div>
        </div>
        
        <!-- Guide Card -->
        <div class="col-md-4">
          <div class="card h-100 border-0 shadow-sm">
            <img src="https://images.unsplash.com/photo-1581093450021-4a7360e9a9e5?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" alt="{% trans 'Tracking status' %}" class="card-img-top" style="height: 180px; object-fit: cover;">
            <div class="card-body">
              <h3 class="h5 fw-semibold mb-2">{% trans "Tracking Your Complaint" %}</h3>
              <p class="text-muted mb-3">{% trans "Understand how to monitor the progress of your filed grievances." %}</p>
              <a href="#" class="btn btn-sm btn-primary-custom">
                {% trans "View Guide" %} <i class="fas fa-arrow-right ms-2"></i>
              </a>
            </div>
          </div>
        </div>
        
        <!-- Guide Card -->
        <div class="col-md-4">
          <div class="card h-100 border-0 shadow-sm">
            <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" alt="{% trans 'Uploading documents' %}" class="card-img-top" style="height: 180px; object-fit: cover;">
            <div class="card-body">
              <h3 class="h5 fw-semibold mb-2">{% trans "Uploading Documents" %}</h3>
              <p class="text-muted mb-3">{% trans "Best practices for attaching evidence to strengthen your complaint." %}</p>
              <a href="#" class="btn btn-sm btn-primary-custom">
                {% trans "View Guide" %} <i class="fas fa-arrow-right ms-2"></i>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Contact Support Section (Hidden by default) -->
    <div id="contact-section" class="help-section d-none">
      <div class="row g-4">
        <div class="col-lg-6">
          <h2 class="h4 fw-bold mb-4 text-indigo"><i class="fas fa-headset me-2 text-accent"></i>{% trans "Contact Support" %}</h2>
          <p class="text-muted mb-4">{% trans "Can't find what you're looking for? Our support team is ready to help you with any questions or issues." %}</p>
          
          <div class="row g-3">
            <div class="col-md-6">
              <div class="card border-0 bg-light h-100">
                <div class="card-body">
                  <div class="d-flex align-items-center mb-3">
                    <div class="icon-circle me-3">
                      <i class="fas fa-phone"></i>
                    </div>
                    <div>
                      <h3 class="h6 fw-semibold mb-0">{% trans "Call Us" %}</h3>
                    </div>
                  </div>
                  <p class="mb-1">1800-123-4567</p>
                  <p class="small text-muted mb-0">{% trans "Monday-Friday, 9AM-6PM" %}</p>
                </div>
              </div>
            </div>
            
            <div class="col-md-6">
              <div class="card border-0 bg-light h-100">
                <div class="card-body">
                  <div class="d-flex align-items-center mb-3">
                    <div class="icon-circle me-3">
                      <i class="fas fa-envelope"></i>
                    </div>
                    <div>
                      <h3 class="h6 fw-semibold mb-0">{% trans "Email Us" %}</h3>
                    </div>
                  </div>
                  <p class="mb-1">support@grievanceportal.gov.in</p>
                  <p class="small text-muted mb-0">{% trans "Typically respond within 24 hours" %}</p>
                </div>
              </div>
            </div>
            
            <div class="col-12">
              <div class="card border-0 bg-light">
                <div class="card-body">
                  <div class="d-flex align-items-center mb-3">
                    <div class="icon-circle me-3">
                      <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <div>
                      <h3 class="h6 fw-semibold mb-0">{% trans "Visit Us" %}</h3>
                    </div>
                  </div>
                  <p class="mb-1">{% trans "Grievance Redressal Center" %}</p>
                  <p class="mb-1">{% trans "Government Complex, New Delhi" %}</p>
                  <p class="small text-muted mb-0">{% trans "By appointment only" %}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="col-lg-6">
          <div class="card border-0">
            <div class="card-body">
              <h3 class="h5 fw-semibold mb-4">{% trans "Send Us a Message" %}</h3>
              <form>
                <div class="mb-3">
                  <label for="contact-name" class="form-label">{% trans "Your Name" %}*</label>
                  <input type="text" id="contact-name" class="form-control" required>
                </div>
                <div class="mb-3">
                  <label for="contact-email" class="form-label">{% trans "Email Address" %}*</label>
                  <input type="email" id="contact-email" class="form-control" required>
                </div>
                <div class="mb-3">
                  <label for="contact-subject" class="form-label">{% trans "Subject" %}*</label>
                  <select id="contact-subject" class="form-select" required>
                    <option value="">{% trans "Select a topic" %}</option>
                    <option value="complaint">{% trans "Complaint Assistance" %}</option>
                    <option value="technical">{% trans "Technical Issue" %}</option>
                    <option value="account">{% trans "Account Help" %}</option>
                    <option value="other">{% trans "Other Inquiry" %}</option>
                  </select>
                </div>
                <div class="mb-3">
                  <label for="contact-message" class="form-label">{% trans "Message" %}*</label>
                  <textarea id="contact-message" rows="4" class="form-control" required></textarea>
                </div>
                <button type="submit" class="btn btn-primary-custom w-100">
                  {% trans "Send Message" %}
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Check Status Section (Hidden by default) -->
    <div id="status-section" class="help-section d-none">
      <h2 class="h4 fw-bold mb-4 text-indigo"><i class="fas fa-search me-2 text-accent"></i>{% trans "Check Complaint Status" %}</h2>
      
      <div class="card border-0 bg-light mb-4">
        <div class="card-body">
          <div class="d-flex">
            <div class="icon-circle me-3">
              <i class="fas fa-info-circle"></i>
            </div>
            <div>
              <h3 class="h6 fw-semibold mb-2">{% trans "How to Check Status" %}</h3>
              <p class="mb-0">{% trans "You can check the status of your complaint by entering your Complaint ID below or visiting the 'My Complaints' section in your dashboard." %}</p>
            </div>
          </div>
        </div>
      </div>
      
      <div class="card border-0 shadow-sm mx-auto" style="max-width: 500px;">
        <div class="card-body">
          <form>
            <div class="mb-3">
              <label for="complaint-id" class="form-label">{% trans "Complaint ID" %}*</label>
              <input type="text" id="complaint-id" placeholder="GRV-123456" class="form-control" required>
            </div>
            <div class="mb-4">
              <label for="registered-email" class="form-label">{% trans "Registered Email" %}*</label>
              <input type="email" id="registered-email" class="form-control" required>
            </div>
            <button type="submit" class="btn btn-primary-custom w-100">
              {% trans "Check Status" %}
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
  // Tab switching functionality
  const tabs = {
    'faq-tab': 'faq-section',
    'guides-tab': 'guides-section',
    'contact-tab': 'contact-section',
    'status-tab': 'status-section'
  };
  
  Object.entries(tabs).forEach(([tabId, sectionId]) => {
    document.getElementById(tabId).addEventListener('click', () => {
      // Update active tab
      document.querySelectorAll('[id$="-tab"]').forEach(tab => {
        tab.classList.remove('active-tab');
        tab.classList.add('text-muted');
      });
      document.getElementById(tabId).classList.add('active-tab');
      document.getElementById(tabId).classList.remove('text-muted');
      
      // Show active section
      document.querySelectorAll('.help-section').forEach(section => {
        section.classList.add('d-none');
      });
      document.getElementById(sectionId).classList.remove('d-none');
    });
  });
  
  // Simulate search functionality
  const searchInput = document.querySelector('input[type="text"]');
  const searchBtn = document.querySelector('.search-box button');
  
  searchBtn.addEventListener('click', () => {
    if (searchInput.value.trim()) {
      alert('Search functionality would show results for: ' + searchInput.value);
    }
  });
  
  searchInput.addEventListener('keyup', (e) => {
    if (e.key === 'Enter') {
      searchBtn.click();
    }
  });
</script>
{% endblock %}